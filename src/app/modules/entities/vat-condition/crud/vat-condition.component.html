<section class="container-fluid">
    <div class="card">
        <div class="card-header">
            <span style="color: #607d8b" *ngIf="operation === 'add' || operation === 'copy'">
                {{ 'add-vat-condition' | translate | capitalize }}
            </span>
            <span style="color: #607d8b" *ngIf="operation === 'update'">
                {{ 'edit' | translate | capitalize }} {{ vatCondition?.description ?? '' }}
            </span>
            <span style="color: #607d8b" *ngIf="operation === 'view' || operation === 'delete'">
                {{ vatCondition?.description ?? '' }}
            </span>
            <div class="pull-right">
                <button type="button" class="btn" (click)="returnTo()">
                    <i class="fa fa-arrow-left"></i>
                    <span>{{ 'return' | translate | capitalize }}</span>
                </button>
                <button type="button" class="btn" [disabled]="loading"
                    *ngIf="operation !== 'delete' && operation !== 'view'" (click)="handleVatConditionOperation()">
                    <i class="fa" [ngClass]="{ 'fa-save': !loading, 'fa-spinner fa-spin': loading }"></i>
                    <span *ngIf="!loading"> {{ 'save' | translate | capitalize }}</span>
                    <span *ngIf="loading"> {{ 'loading' | translate | capitalize }}</span>
                </button>
                <button type="button" class="btn btn-danger active" *ngIf="operation === 'delete'" [disabled]="loading"
                    (click)="handleVatConditionOperation()">
                    <i class="fa" [ngClass]="{ 'fa-trash': !loading, 'fa-spinner fa-spin': loading }"></i>
                    <span *ngIf="!loading">{{ 'delete' | translate | capitalize }}</span>
                    <span *ngIf="loading">{{ 'loading' | translate | capitalize }}</span>
                </button>
            </div>
        </div>

        <div class="card-body scroll">
            <form [formGroup]="vatConditionForm" (ngSubmit)="handleVatConditionOperation()" autocomplete="off">
                <!-- Datos principales -->
                <div class="row">
                    <label class="form-group col-md-12">
                        <b>{{ 'mainData' | translate | capitalize }}</b>
                    </label>
                </div>

                <div class="row">
                    <div class="col-md-8">
                        <div class="row">
                            <div class="form-group col-md-2">
                                <label for="code" class="control-label">{{ 'code' | translate | capitalize }}:</label>
                                <input type="number" class="form-control" formControlName="code" id="code" [ngClass]="{
                    'is-invalid': vatConditionForm.get('code')?.touched && vatConditionForm.get('code')?.invalid
                  }" />
                                <div class="invalid-feedback"
                                    *ngIf="vatConditionForm.get('code')?.touched && vatConditionForm.get('code')?.hasError('required')">
                                    {{ 'fieldRequired' | translate | capitalize }}
                                </div>
                            </div>

                            <div class="form-group col-md-8">
                                <label for="description" class="control-label">{{ 'description' | translate | capitalize
                                    }}:</label>
                                <input type="text" class="form-control" formControlName="description" id="description"
                                    [focus]="focusEvent" [ngClass]="{
                    'is-invalid':
                      vatConditionForm.get('description')?.touched && vatConditionForm.get('description')?.invalid
                  }" />
                                <div class="invalid-feedback" *ngIf="
                    vatConditionForm.get('description')?.touched &&
                    vatConditionForm.get('description')?.hasError('required')
                  ">
                                    {{ 'fieldRequired' | translate | capitalize }}
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label for="transactionLetter" class="control-label">
                                    {{ 'transactionLetter' | translate | capitalize }}:
                                </label>

                                <select class="form-control" formControlName="transactionLetter" [focus]="focusEvent"
                                    [ngClass]="{
      'is-invalid':
        vatConditionForm.get('transactionLetter')?.touched &&
        vatConditionForm.get('transactionLetter')?.invalid
    }">
                                    <option *ngFor="let letter of letters" [value]="letter">
                                        {{ letter }}
                                    </option>
                                </select>

                                <div class="invalid-feedback" *ngIf="
      vatConditionForm.get('transactionLetter')?.touched &&
      vatConditionForm.get('transactionLetter')?.hasError('required')
    ">
                                    {{ 'fieldRequired' | translate | capitalize }}
                                </div>
                            </div>

                            <div class="col-md-6">
                                <label for="discriminate">{{ 'discriminate' | translate | capitalize }}:</label>
                                <select class="form-control" formControlName="discriminate">
                                    <option [ngValue]="true">{{ 'true' | translate | capitalize }}</option>
                                    <option [ngValue]="false">{{ 'false' | translate | capitalize }}</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-md-12">
                                <label for="observation">{{ 'observation' | translate | capitalize }}:</label>
                                <textarea class="form-control" formControlName="observation" name="observation"
                                    id="observation"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <!-- Audit -->
                <div class="row">
                    <label class="form-group col-md-12">
                        <b>{{ 'audit' | translate | capitalize }}</b>
                    </label>
                </div>

                <div class="row">
                    <div class="form-group col-md-12">
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="control-label">
                                    {{ 'creationUser.name' | translate | capitalize }}:
                                    <b>{{ vatCondition?.creationUser?.name ?? '' }}</b>
                                </label>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="control-label">
                                    {{ 'theDay' | translate | capitalize }}:
                                    <b>{{ vatCondition?.creationDate ?? null | dateFormat : 'DD/MM/YYYY HH:mm:ss' }}</b>
                                </label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="control-label">
                                    {{ 'updateUser.name' | translate | capitalize }}:
                                    <b>{{ vatCondition?.updateUser?.name ?? '' }}</b>
                                </label>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="control-label">
                                    {{ 'theDay' | translate | capitalize }}:
                                    <b>{{ vatCondition?.updateDate ?? null | dateFormat : 'DD/MM/YYYY HH:mm:ss' }}</b>
                                </label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="control-label">
                                    {{ 'id' | translate | capitalize }}:
                                    <b>{{ vatCondition?._id ?? '' }}</b>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>