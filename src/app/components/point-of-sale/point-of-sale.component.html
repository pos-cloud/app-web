<!-- POS RESTO -->
<section class="container-fluid pos-resto" *ngIf="posType=='resto'">
    <div class="row center-content">
      <div *ngIf="alertMessage !== ''">
        <ngb-alert [type]="alertConfig.type" [dismissible]="alertConfig.dismissible" (close)="alertMessage=''">
          {{alertMessage}}
        </ngb-alert>
      </div>
    </div> 
    <div class="row center-content">
      <div class="btn-group btn-lg" role="group" aria-label="Basic example">
        <button type="button" [ngClass]="{'btn btn-primary':roomSelected._id===room._id,
                            'btn btn-secondary':roomSelected._id!==room._id}" *ngFor="let room of rooms" (click)="changeRoom(room)"  title="Cambiar de Salón">
          {{room.description}}
        </button>
      </div>
    </div>
    <div class="row tables-container table-responsive">
      <div *ngIf="roomSelected">
        <app-list-tables (eventBackToRoom)="changeRoom($room)" (eventTableSelected)="selectTable($event)" [filterRoom]="roomSelected.description"></app-list-tables>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 container-btns">
        <div class="btn center-content btn-turn btn-turn-text" (click)="getEmployeeType('open-turn', 'Mozo')">
          <b>Abrir
            <br>Turno</b>
        </div>
        <div class="btn center-content btn-turn btn-turn-text" (click)="getEmployeeType('close-turn', 'Mozo')">
          <b>Cerrar
            <br>Turno</b>
        </div>
      </div>
    </div>
  </section>
  
  <!-- POS DELIVERY -->
  <section class="container-fluid" *ngIf="posType=='delivery'">
    <div class="row center-content margin-top" *ngIf="alertMessage !== ''">
      <ngb-alert [type]="alertConfig.type" [dismissible]="alertConfig.dismissible" (close)="alertMessage=''">
        {{alertMessage}}
      </ngb-alert>
    </div>
    <div class="card card-outline-primary list-delivery">
      <div class="card-header bg-primary">Pendientes
        <div class="pull-right">
          <div class="btn-group" ngbDropdown>
            <button class="btn btn-primary" ngbDropdownToggle data-toggle="tooltip" data-placement="top" title="Administrar caja"><i class="fa fa-plus"> Caja</i></button>
            <div class="dropdown-menu" ngbDropdownMenu>
              <button class="dropdown-item" *ngFor="let transactionType of transactionTypes" (click)="addTransaction(transactionType)">{{transactionType.name}}</button>
            </div>
          </div>
          <button class="btn btn-primary" (click)="getDefectOrder()"><i class="fa fa-plus"> Nuevo Pedido</i></button>
          <button class="btn btn-primary fa fa-refresh" (click)="refresh()" [disabled]="loading"><i [ngClass]="{'fa fa-refresh fa-spin':loading}"></i><span> Actualizar</span></button>
          <span (click)="areFiltersVisible = !areFiltersVisible">
            <i class="btn btn-primary fa fa-filter" data-toggle="tooltip" data-placement="top" title="Aplicar Filtros"> Filtrar</i>
          </span>
        </div>
      </div>
      <div class="card-block table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th (click)="orderBy('number')">Número</th>
              <th (click)="orderBy('startDate')">Pedido</th>
              <th (click)="orderBy('company','name')">Cliente</th>
              <th (click)="orderBy('company','address')">Dirección</th>
              <th (click)="orderBy('company','phones')">Teléfono</th>
              <th (click)="orderBy('totalPrice')">Precio Total</th>
              <th></th>
            </tr>
            <tr *ngIf="areFiltersVisible" class="filters">
              <th><input type="text" class="form-control" [(ngModel)]="filterPendingNumber" placeholder="Número..."></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterPendingStartDate" placeholder="Fecha Pedido..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterPendingCompany" placeholder="Cliente..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterPendingAddress" placeholder="Dirección..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterPendingPhones" placeholder="Teléfono..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterPendingTotalPrice" placeholder="Precio Total..."></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions | filter: filterPendingNumber:'number'
                                                        | filter: filterPendingStartDate:'startDate'
                                                        | filter: filterPendingCompany:'name':'company'
                                                        | filter: filterPendingAddress:'address':'company'
                                                        | filter: filterPendingPhones:'phones':'company'
                                                        | filter: filterPendingTotalPrice:'totalPrice'
                                                        | filter: 'Abierto':'state'
                                                        | orderBy: orderTerm: propertyTerm">
              <td (click)="openTransaction(transaction)">
                <b>{{transaction.number}}</b>
              </td>
              <td (click)="openTransaction(transaction)">{{transaction.startDate | dateFormat:'DD/MM/YYYY' }}
                <b>{{transaction.startDate | dateFormat:'HH:mm:ss' }}</b>
              </td>
              <td (click)="openTransaction(transaction)" *ngIf="transaction.company">{{transaction.company.name}}</td>
              <td (click)="openTransaction(transaction)" *ngIf="!transaction.company"></td>
              <td (click)="openTransaction(transaction)" *ngIf="transaction.company">{{transaction.company.address}}</td>
              <td (click)="openTransaction(transaction)" *ngIf="!transaction.company"></td>
              <td (click)="openTransaction(transaction)" *ngIf="transaction.company">{{transaction.company.phones}}</td>
              <td (click)="openTransaction(transaction)" *ngIf="!transaction.company"></td>
              <td (click)="openTransaction(transaction)">{{transaction.totalPrice | currency:'USD':'symbol-narrow':'1.2-2'}}</td>
              <td>
                <button class="btn btn-primary" (click)="changeStateOfTransaction(transaction, 'Enviado')"  title="Enviar pedido">
                  <i class="fa fa-motorcycle">
                  </i>
                </button>
              </td>
            </tr>
            <tr align="center" *ngIf="areTransactionsEmpty">
              <td colspan="7">Aún no hay pedidos pendientes</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="card card-outline-warning list-delivery">
      <div class="card-header bg-warning">Enviados
        <div class="pull-right">
          <span (click)="areFiltersVisible = !areFiltersVisible">
            <i class="btn btn-warning fa fa-filter" data-toggle="tooltip" data-placement="top" title="Aplicar Filtros"></i>
          </span>
        </div>
      </div>
      <div class="card-block table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th (click)="orderBy('number')">Número</th>
              <th (click)="orderBy('startDate')">Pedido</th>
              <th (click)="orderBy('endDate')">Enviado</th>
              <th (click)="orderBy('company','name')">Cliente</th>
              <th (click)="orderBy('company','address')">Dirección</th>
              <th (click)="orderBy('company','phones')">Teléfono</th>
              <th (click)="orderBy('employeeOpening','name')">Repartidor</th>
              <th (click)="orderBy('totalPrice')">Precio Total</th>
              <th></th>
            </tr>
            <tr *ngIf="areFiltersVisible" class="filters">
              <th><input type="text" class="form-control" [(ngModel)]="filterSendNumber" placeholder="Número..."></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterSendStartDate" placeholder="Pedido..."></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterSendEndDate" placeholder="Enviado..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterSendCompany" placeholder="Cliente..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterSendAddress" placeholder="Dirección..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterSendPhones" placeholder="Teléfono..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterSendEmployeeOpening" placeholder="Repartidor..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterSendTotalPrice" placeholder="Precio Total...">
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions | filter: filterSendNumber:'number'
                                                        | filter: filterSendStartDate:'startDate'
                                                        | filter: filterSendEndDate:'endDate'
                                                        | filter: filterSendCompany:'name':'company'
                                                        | filter: filterSendAddress:'address':'company'
                                                        | filter: filterSendPhones:'phones':'company'
                                                        | filter: filterSendEmployeeOpening:'name':'employeeOpening'
                                                        | filter: filterSendTotalPrice:'totalPrice'
                                                        | filter: 'Enviado':'state'
                                                        | orderBy: orderTerm: propertyTerm">
              <td><b>{{transaction.number}}</b></td>
              <td>{{transaction.startDate | dateFormat:'DD/MM/YYYY' }}
                <b>{{transaction.startDate | dateFormat:'HH:mm:ss' }}</b>
              </td>
              <td>{{transaction.endDate | dateFormat:'DD/MM/YYYY' }}
                <b>{{transaction.endDate | dateFormat:'HH:mm:ss' }}</b>
              </td>
              <td *ngIf="transaction.company">{{transaction.company.name}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.company">{{transaction.company.address}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.company">{{transaction.company.phones}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.employeeOpening">{{transaction.employeeOpening.name}}</td>
              <td *ngIf="!transaction.employeeOpening"></td>
              <td>{{transaction.totalPrice | currency:'USD':'symbol-narrow':'1.2-2'}}</td>
              <td>
                <button class="btn btn-warning" (click)="changeStateOfTransaction(transaction, 'Entregado')"  title="Entregar">
                  <i class="fa fa-handshake-o">
                  </i>
                </button>
              </td>
            </tr>
            <tr align="center" *ngIf="areTransactionsEmpty">
              <td colspan="9">Aún no hay pedidos enviados</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="card card-outline-success list-delivery">
      <div class="card-header bg-success">Entregados
        <div class="pull-right">
          <span (click)="areFiltersVisible = !areFiltersVisible">
            <i class="btn btn-success fa fa-filter" data-toggle="tooltip" data-placement="top" title="Aplicar Filtros"></i>
          </span>
        </div>
      </div>
      <div class="card-block table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th (click)="orderBy('number')">Número</th>
              <th (click)="orderBy('startDate')">Pedido</th>
              <th (click)="orderBy('endDate')">Entregado</th>
              <th (click)="orderBy('company','name')">Cliente</th>
              <th (click)="orderBy('company','address')">Dirección</th>
              <th (click)="orderBy('company','phones')">Teléfono</th>
              <th (click)="orderBy('employeeOpening','name')">Repartidor</th>
              <th (click)="orderBy('totalPrice')">Precio Total</th>
              <th></th>
            </tr>
            <tr *ngIf="areFiltersVisible" class="filters">
              <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredNumber" placeholder="Número..."></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterDeliveredStartDate" placeholder="Pedido..."></th
                ><th><input type="date" class="form-control" [(ngModel)]="filterDeliveredEndDate" placeholder="Entregado..."></th>
                <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredCompany" placeholder="Cliente..."></th>
                <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredAddress" placeholder="Dirección..."></th>
                <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredPhones" placeholder="Teléfono..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredEmployeeOpening" placeholder="Repartidor..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterDeliveredTotalPrice" placeholder="Precio Total...">
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions | filter: filterDeliveredNumber:'number'
                                                        | filter: filterDeliveredStartDate:'startDate'
                                                        | filter: filterDeliveredEndDate:'endDate'
                                                        | filter: filterDeliveredCompany:'name':'company'
                                                        | filter: filterDeliveredAddress:'address':'company'
                                                        | filter: filterDeliveredPhones:'phones':'company'
                                                        | filter: filterDeliveredEmployeeOpening:'name':'employeeOpening'
                                                        | filter: filterDeliveredTotalPrice:'totalPrice'
                                                        | filter: 'Entregado':'state'
                                                        | orderBy: orderTerm: propertyTerm">
              <td>
                <b>{{transaction.number}}</b>
              </td>
              <td>{{transaction.startDate | dateFormat:'DD/MM/YYYY' }}
                <b>{{transaction.startDate | dateFormat:'HH:mm:ss' }}</b>
              </td>
              <td>{{transaction.endDate | dateFormat:'DD/MM/YYYY' }}
                <b>{{transaction.endDate | dateFormat:'HH:mm:ss' }}</b>
              </td>
              <td *ngIf="transaction.company">{{transaction.company.name}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.company">{{transaction.company.address}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.company">{{transaction.company.phones}}</td>
              <td *ngIf="!transaction.company"></td>
              <td *ngIf="transaction.employeeOpening">{{transaction.employeeOpening.name}}</td>
              <td *ngIf="!transaction.employeeOpening"></td>
              <td>{{transaction.totalPrice | currency:'USD':'symbol-narrow':'1.2-2'}}</td>
              <td>
                <button class="btn btn-danger" (click)="cancelTransaction(transaction)"  title="Cancelar">
                  <i class="fa fa-close">
                  </i>
                </button>
                <button class="btn btn-success" (click)="chargeTransaction(transaction)"  title="Cobrar">
                  <i class="fa fa-credit-card">
                  </i>
                </button>
              </td>
            </tr>
            <tr align="center" *ngIf="areTransactionsEmpty">
              <td colspan="9">Aún no hay pedidos entregados</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
  
  <!-- POS MOSTRADOR -->
  <section class="container-fluid" *ngIf="posType=='mostrador'">
    <div class="row center-content">
      <div *ngIf="alertMessage !== ''">
        <ngb-alert [type]="alertConfig.type" [dismissible]="alertConfig.dismissible" (close)="alertMessage=''">
          {{alertMessage}}
        </ngb-alert>
      </div>
    </div>
    <div class="card card-outline-primary list-counter">
      <div class="card-header bg-primary">
        <span>{{transactionMovement}} Pendientes</span>
        <div class="pull-right">
          <div class="btn-group" ngbDropdown>
            <button class="btn btn-primary" ngbDropdownToggle data-toggle="tooltip" data-placement="top" title="Crear Nuevo Comprobante"><i class="fa fa-plus"> Nuevo</i></button>
            <div class="dropdown-menu" ngbDropdownMenu>
              <button class="dropdown-item" *ngFor="let transactionType of transactionTypes" (click)="addTransaction(transactionType)">{{transactionType.name}}</button>
            </div>
          </div>
          <button class="btn btn-primary fa fa-refresh" (click)="refresh()" [disabled]="loading"><i [ngClass]="{'fa fa-refresh fa-spin':loading}"></i><span> Actualizar</span></button>
          <span (click)="areFiltersVisible = !areFiltersVisible">
            <i class="btn btn-primary fa fa-filter" data-toggle="tooltip" data-placement="top" title="Aplicar Filtros"> Filtrar</i>
          </span>
        </div>
      </div>
      <div class="card-block table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th></th>
              <th (click)="orderBy('type','name')">Tipo</th>
              <th (click)="orderBy('startDate')">Fecha</th>
              <th (click)="orderBy('number')">Número</th>
              <th (click)="orderBy('employeeClosing','name')" *ngIf="transactionMovement === 'Venta'">Vendedor</th>
              <th (click)="orderBy('company','name')" *ngIf="transactionMovement === 'Venta'">Cliente</th>
              <th (click)="orderBy('company','name')" *ngIf="transactionMovement === 'Compra'">Proveedor</th>
              <th (click)="orderBy('totalPrice')" *ngIf="transactionMovement === 'Stock'" >Depósito</th>
              <th (click)="orderBy('totalPrice')" *ngIf="transactionMovement !== 'Stock'" >Precio Total</th>
            </tr>
            <tr *ngIf="areFiltersVisible" class="filters">
              <th></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterType" placeholder="Tipo..."></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterStartDate" placeholder="Fecha..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterNumber" placeholder="Número..."></th>
              <th *ngIf="transactionMovement === 'Venta'"><input type="text" class="form-control" [(ngModel)]="filterEmployeeClosing" placeholder="Vendedor..."></th>
              <th *ngIf="transactionMovement !== 'Stock'"><input type="text" class="form-control" [(ngModel)]="filterCompany" placeholder="Empresa..."></th>
              <th *ngIf="transactionMovement !== 'Stock'"><input type="text" class="form-control" [(ngModel)]="filterTotalPrice" placeholder="Precio Total..."></th>
              <th *ngIf="transactionMovement === 'Stock'" ><input type="text" class="form-control" [(ngModel)]="filterDeposit" placeholder="Depósito Origen..."></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions | filter: filterType:'name':'type'
                                                        | filter: filterStartDate:'startDate'
                                                        | filter: filterNumber:'number'
                                                        | filter: filterEmployeeClosing:'name':'employeeClosing'
                                                        | filter: filterCompany:'name':'company'
                                                        | filter: filterTotalPrice:'totalPrice'
                                                        | filter: filterDeposit:'name':'depositOrigin'
                                                        | orderBy: orderTerm: propertyTerm
                                                        | paginate: { itemsPerPage: itemsPerPage,
                                                                      currentPage: p,
                                                                      totalItems: totalItems
                                                                    }">
              <td align="left" width="150">
                <button type="button" class="btn btn-success" (click)="viewTransaction(transaction)"  title="Ver"><i class="fa fa-eye"></i></button>
                <button type="button" class="btn btn-danger" (click)="cancelTransaction(transaction)" title="Anular"><i class="fa fa-close"></i></button>
              </td>
              <td (click)="openTransaction(transaction)">{{transaction.type.name}}</td>
              <td *ngIf="transaction.endDate" (click)="openTransaction(transaction)">{{transaction.endDate | dateFormat:'DD/MM/YYYY' }}</td>
              <td *ngIf="!transaction.endDate" (click)="openTransaction(transaction)">{{transaction.startDate | dateFormat:'DD/MM/YYYY hh:mm:ss' }}</td>
              <td (click)="openTransaction(transaction)">
                <b>{{transaction.number}}</b>
              </td>
              <td *ngIf="transaction.employeeClosing && (transactionMovement === 'Venta')" (click)="openTransaction(transaction)">{{transaction.employeeClosing.name}}</td>
              <td *ngIf="!transaction.employeeClosing && (transactionMovement === 'Venta')" (click)="openTransaction(transaction)"></td>
              <td *ngIf="transaction.company && (transactionMovement === 'Compra' || transactionMovement === 'Venta')" (click)="openTransaction(transaction)">{{transaction.company.name}}</td>
              <td *ngIf="!transaction.company && (transactionMovement === 'Venta')" (click)="openTransaction(transaction)">Consumidor Final</td>
              <td *ngIf="!transaction.company && (transactionMovement === 'Compra')" (click)="openTransaction(transaction)"></td>
              <td *ngIf="transactionMovement !== 'Stock'">{{transaction.totalPrice | currency:'USD':'symbol-narrow':'1.2-2'}}</td>
              <td *ngIf="transactionMovement === 'Stock' && transaction.type.stockMovement !== 'Transferencia'">{{transaction.depositOrigin.name}}</td>
              <td *ngIf="transactionMovement === 'Stock' && transaction.type.stockMovement === 'Transferencia'">{{transaction.depositOrigin.name}} -> {{transaction.depositDestination.name}}</td>

            </tr>
            <tr align="center" *ngIf="areTransactionsEmpty">
              <td colspan="7">Aún no hay transacciones pendientes</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card-footer bg-primary">
        <div class="row">
          <div class="col-md-10">
            <pagination-controls
                        class="my-pagination"
                        (pageChange)="p=$event"
                        #api
                        previousLabel="Ant."
                        nextLabel="Sig."
                        autoHide="true">
              </pagination-controls>
          </div>
          <div class="form-group col-md-2">
            <select class="form-control" [(ngModel)]="itemsPerPage">
              <option [value]="5">Mostrar 5 Registros</option>
              <option [value]="10">Mostrar 10 Registros</option>
              <option [value]="15">Mostrar 15 Registros</option>
              <option [value]="20">Mostrar 20 Registros</option>
              <option [value]="50">Mostrar 50 Registros</option>
              <option [value]="100">Mostrar 100 Registros</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PEDIDOS-WEB -->
  <section class="container-fluid" *ngIf="posType=='pedidos-web'">
    <div class="row center-content">
      <div *ngIf="alertMessage !== ''">
        <ngb-alert [type]="alertConfig.type" [dismissible]="alertConfig.dismissible" (close)="alertMessage=''">
          {{alertMessage}}
        </ngb-alert>
      </div>
    </div>
    <div class="card card-outline-primary list-counter">
      <div class="card-header bg-primary">
        <span>Pedidos a Confirmar</span>
        <div class="pull-right">
          <button class="btn btn-primary fa fa-refresh" (click)="refresh()" [disabled]="loading"><i [ngClass]="{'fa fa-refresh fa-spin':loading}"></i><span> Actualizar</span></button>
          <span (click)="areFiltersVisible = !areFiltersVisible">
            <i class="btn btn-primary fa fa-filter" data-toggle="tooltip" data-placement="top" title="Aplicar Filtros"> Filtrar</i>
          </span>
        </div>
      </div>
      <div class="card-block table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th></th>
              <th (click)="orderBy('startDate')">Fecha</th>
              <th (click)="orderBy('number')">Número</th>
              <th (click)="orderBy('company','name')" >Cliente</th>
              <th (click)="orderBy('totalPrice')">Precio Total</th>
            </tr>
            <tr *ngIf="areFiltersVisible" class="filters">
              <th></th>
              <th><input type="date" class="form-control" [(ngModel)]="filterStartDate" placeholder="Fecha..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterNumber" placeholder="Número..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterCompany" placeholder="Empresa..."></th>
              <th><input type="text" class="form-control" [(ngModel)]="filterTotalPrice" placeholder="Precio Total..."></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions | filter: filterStartDate:'startDate'
                                                        | filter: filterNumber:'number'
                                                        | filter: filterCompany:'name':'company'
                                                        | filter: filterTotalPrice:'totalPrice'
                                                        | orderBy: orderTerm: propertyTerm
                                                        | paginate: { itemsPerPage: itemsPerPage,
                                                                      currentPage: p,
                                                                      totalItems: totalItems
                                                                    }">
              <td align="left" width="150">
                <button type="button" class="btn btn-success" (click)="viewTransaction(transaction)"  title="Ver"><i class="fa fa-eye"></i></button>
                <button type="button" class="btn btn-danger" (click)="cancelTransaction(transaction)" title="Anular"><i class="fa fa-close"></i></button>
              </td>
              <td *ngIf="transaction.endDate" >{{transaction.endDate | dateFormat:'DD/MM/YYYY' }}</td>
              <td *ngIf="!transaction.endDate" >{{transaction.startDate | dateFormat:'DD/MM/YYYY hh:mm:ss' }}</td>
              <td ><b>{{transaction.number}}</b></td>
              <td *ngIf="transaction.company" >{{transaction.company.name}}</td>
              <td *ngIf="!transaction.company" >Consumidor Final</td>
              <td>{{transaction.totalPrice | currency:'USD':'symbol-narrow':'1.2-2'}}</td>
            </tr>
            <tr align="center" *ngIf="areTransactionsEmpty">
              <td colspan="7">Aún no hay transacciones pendientes</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card-footer bg-primary">
        <div class="row">
          <div class="col-md-10">
            <pagination-controls
                        class="my-pagination"
                        (pageChange)="p=$event"
                        #api
                        previousLabel="Ant."
                        nextLabel="Sig."
                        autoHide="true">
              </pagination-controls>
          </div>
          <div class="form-group col-md-2">
            <select class="form-control" [(ngModel)]="itemsPerPage">
              <option [value]="5">Mostrar 5 Registros</option>
              <option [value]="10">Mostrar 10 Registros</option>
              <option [value]="15">Mostrar 15 Registros</option>
              <option [value]="20">Mostrar 20 Registros</option>
              <option [value]="50">Mostrar 50 Registros</option>
              <option [value]="100">Mostrar 100 Registros</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!--MODAL IMPRESORA-->
  <ng-template #contentPrinters let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Selecciona una impresora</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('close_click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <ul class="list-group">
              <li class="list-group-item center-content btn" *ngFor="let printer of printers" (click)="c(printer)">{{printer.name}}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="c('cancel')">Cancelar</button>
    </div>
  </ng-template>
  
  <!-- BOTON CTA CTE -->
  <div class="btn-group" ngbDropdown *ngIf="posType=='cuentas-corrientes' && transactionTypes && transactionTypes.length > 0">
    <button class="btn btn-primary" ngbDropdownToggle data-toggle="tooltip" data-placement="top" title="Crear Nuevo Comprobante">
      <i class="fa fa-plus"> Nuevo 
        <span *ngIf="company && company.type === 'Cliente'">Cobro</span>
        <span *ngIf="company && company.type === 'Proveedor'">Pago</span>
      </i>
    </button>
    <div class="dropdown-menu" ngbDropdownMenu>
      <button class="dropdown-item" *ngFor="let transactionType of transactionTypes" (click)="addTransaction(transactionType)">{{transactionType.name}}</button>
    </div>
  </div>