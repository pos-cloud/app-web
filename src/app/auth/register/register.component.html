<section class="fondo-register center-content">
  <div class="box-register">
    <div class="row" align="center">
      <div class="logo">
        <img width="130" src="assets/img/logo.png" />
      </div>
    </div>
    <br />
    <div class="row" align="center">
      <h5>Registra tu negocio GRATIS</h5>
    </div>
    <hr />
    <form [formGroup]="registerForm" (ngSubmit)="register()" autocomplete="off">
      <div class="row">
        <div class="center-content">
          <div class="row">
            <div class="form-group col-md-12">
              <label for="fullName" class="control-label">Nombre y Apellido:</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  formControlName="fullName"
                  name="fullName"
                  id="fullName"
                  [focus]="focusEvent"
                  [ngClass]="{
                    'is-invalid': registerForm.get('fullName')?.touched && registerForm.get('fullName')?.invalid
                  }"
                />
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('fullName')?.touched && registerForm.get('fullName')?.hasError('required')"
              >
                Este campo es requerido.
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('fullName')?.touched && registerForm.get('fullName')?.hasError('minlength')"
              >
                El nombre debe tener al menos 2 caracteres.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="companyName" class="control-label">Nombre del negocio:</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  formControlName="companyName"
                  name="companyName"
                  id="companyName"
                  [ngClass]="{
                    'is-invalid': registerForm.get('companyName')?.touched && registerForm.get('companyName')?.invalid
                  }"
                />
              </div>
              <div
                class="invalid-feedback"
                *ngIf="
                  registerForm.get('companyName')?.touched && registerForm.get('companyName')?.hasError('required')
                "
              >
                Este campo es requerido.
              </div>
              <div
                class="invalid-feedback"
                *ngIf="
                  registerForm.get('companyName')?.touched && registerForm.get('companyName')?.hasError('minlength')
                "
              >
                El nombre del negocio debe tener al menos 2 caracteres.
              </div>
              <div
                class="invalid-feedback"
                *ngIf="
                  registerForm.get('companyName')?.touched &&
                  registerForm.get('companyName')?.hasError('invalidCompanyName')
                "
              >
                No se aceptan los siguientes caracteres: '.', '&amp;', '&#64;'
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('companyName')?.touched && registerForm.get('companyName')?.hasError('pattern')"
              >
                Solo se permiten letras y números (sin espacios).
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="email" class="control-label">Email:</label>
              <div class="input-group">
                <input
                  type="email"
                  class="form-control"
                  formControlName="email"
                  name="email"
                  id="email"
                  placeholder="juan@example.com"
                  [ngClass]="{
                    'is-invalid': registerForm.get('email')?.touched && registerForm.get('email')?.invalid
                  }"
                />
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.hasError('required')"
              >
                Este campo es requerido.
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.hasError('email')"
              >
                Ingrese un email válido.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="phone" class="control-label">Teléfono:</label>
              <div class="input-group">
                <input
                  type="tel"
                  class="form-control"
                  formControlName="phone"
                  name="phone"
                  id="phone"
                  [ngClass]="{
                    'is-invalid': registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid
                  }"
                />
              </div>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('phone')?.touched && registerForm.get('phone')?.hasError('required')"
              >
                Este campo es requerido.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-12">
              <label for="country" class="control-label">País:</label>
              <select
                class="form-control"
                formControlName="country"
                name="country"
                id="country"
                [ngClass]="{
                  'is-invalid': registerForm.get('country')?.touched && registerForm.get('country')?.invalid
                }"
              >
                <option value="">Seleccione un país</option>
                <option *ngFor="let country of countries" [value]="country.code">
                  {{ country.name }}
                </option>
              </select>
              <div
                class="invalid-feedback"
                *ngIf="registerForm.get('country')?.touched && registerForm.get('country')?.hasError('required')"
              >
                Debe seleccionar un país.
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="center-content">
          <div class="row">
            <div class="col-md-12" align="center">
              <button type="submit" class="btn btn-primary" [disabled]="loading">
                <span *ngIf="!loading">Registrar</span>
                <span *ngIf="loading">Espere por favor</span>
              </button>
            </div>
          </div>
          <br /><br />
          <div class="row">
            <div class="col-md-12" align="center">
              <b>¿Ya tienes una cuenta?</b><a routerLink="/login"> Iniciar sesión</a>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
