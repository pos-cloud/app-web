# Utiliza una imagen de Node con la versión que necesitas
FROM node:18.10.0

# Crea un directorio de trabajo en la imagen
WORKDIR /app

# Copia los archivos del contexto de construcción al directorio de trabajo
COPY . .

# Instala las dependencias y realiza la construcción de Angular
RUN npm install --legacy-peer-deps
RUN npm install -g @angular/cli
RUN npm run build:prod

# Crea un directorio para contener los archivos finales
RUN mkdir /app/dist

# Mueve los archivos resultantes al directorio creado
RUN cp -r /app/dist/* /app/dist/

# CMD para mover los archivos a /home/system cuando se inicia el contenedor
CMD mv /app/dist/* /home/system/
