# Establece la imagen base de Node
FROM node:18.x as build-step

# Establece el directorio de trabajo
WORKDIR /app

# Copia todos los archivos al directorio de trabajo
COPY . .

# Instala dependencias y construye la aplicaci√≥n Angular
RUN npm install --legacy-peer-deps && \
    npm install -g @angular/cli && \
    npm run build:prod

# Establece la imagen base de Nginx
FROM nginx:stable

# Copia los archivos compilados de Angular al directorio de Nginx
COPY --from=build-step /app/dist /usr/share/nginx/html
